# çŸ¥è¯†åº“åŠŸèƒ½è®¾è®¡æ–¹æ¡ˆ

> è®¾è®¡æ—¥æœŸï¼š2026-01-03
> è®¾è®¡ç›®æ ‡ï¼šä¸º ZenOps æ·»åŠ å®Œæ•´çš„çŸ¥è¯†åº“ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒæ–‡æ¡£ç®¡ç†ã€æ™ºèƒ½æ£€ç´¢å’Œ AI å¯¹è¯é›†æˆ

## ä¸€ã€è®¾è®¡èƒŒæ™¯

### 1.1 å½“å‰çŠ¶æ€

**åç«¯èƒ½åŠ›ï¼ˆå·²å®ç°ï¼‰**ï¼š
- âœ… FTS5 å…¨æ–‡æ£€ç´¢ + å‘é‡æ£€ç´¢ï¼ˆæ··åˆæ£€ç´¢ï¼‰
- âœ… æ”¯æŒæ–‡æ¡£ç±»å‹ï¼šmarkdown, pdf, url, manual
- âœ… æ–‡æ¡£ CRUD æ¥å£ï¼ˆRetriever å±‚ï¼‰
- âœ… è‡ªåŠ¨é›†æˆåˆ° AI å¯¹è¯ï¼ˆStreamHandler è‡ªåŠ¨æ£€ç´¢ç›¸å…³æ–‡æ¡£ï¼‰
- âœ… Embedding è‡ªåŠ¨ç”Ÿæˆï¼ˆè¯­ä¹‰æœç´¢ï¼‰

**å‰ç«¯çŠ¶æ€ï¼ˆç¼ºå¤±ï¼‰**ï¼š
- âŒ æ— çŸ¥è¯†åº“ç®¡ç†ç•Œé¢
- âŒ å¯¼èˆªæ æ— çŸ¥è¯†åº“å…¥å£
- âŒ ç”¨æˆ·æ— æ³•å¯è§†åŒ–ç®¡ç†æ–‡æ¡£

### 1.2 è®¾è®¡ç›®æ ‡

**æ ¸å¿ƒç›®æ ‡**ï¼š
1. æä¾›å¯è§†åŒ–çš„çŸ¥è¯†åº“ç®¡ç†ç•Œé¢ï¼ˆWeb UIï¼‰
2. æ”¯æŒæ–‡æ¡£çš„å¢åˆ æ”¹æŸ¥ã€åˆ†ç±»ç®¡ç†ã€æ ‡ç­¾ç®¡ç†
3. ä¸ AI å¯¹è¯æ·±åº¦é›†æˆï¼Œæ˜¾ç¤ºå¼•ç”¨æ¥æº
4. ä¸ºæœªæ¥æ‰©å±•ï¼ˆURL å¯¼å…¥ã€æ–‡æ¡£çˆ¬å–ï¼‰é¢„ç•™æ¥å£

**ç”¨æˆ·ä»·å€¼**ï¼š
- è¿ç»´äººå‘˜å¯ä»¥æ²‰æ·€è¿ç»´ç»éªŒï¼ˆæ“ä½œæ‰‹å†Œã€æ•…éšœå¤„ç†æ–¹æ¡ˆï¼‰
- AI å¯¹è¯èƒ½å¼•ç”¨å›¢é˜ŸçŸ¥è¯†åº“ï¼Œå›ç­”æ›´å‡†ç¡®
- å›¢é˜ŸçŸ¥è¯†å…±äº«å’Œä¼ æ‰¿

---

## äºŒã€åŠŸèƒ½æ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å‰ç«¯ç•Œé¢å±‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ çŸ¥è¯†åº“ç®¡ç†   â”‚  æ–‡æ¡£ç¼–è¾‘å™¨   â”‚  æœç´¢/ç­›é€‰   â”‚        â”‚
â”‚  â”‚  (åˆ—è¡¨/åˆ†ç±») â”‚  (Markdown)  â”‚  (æ ‡ç­¾/åˆ†ç±») â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†• REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     åç«¯æœåŠ¡å±‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  KnowledgeHandler (REST API)             â”‚          â”‚
â”‚  â”‚  - æ–‡æ¡£ CRUD                             â”‚          â”‚
â”‚  â”‚  - åˆ†ç±»/æ ‡ç­¾ç®¡ç†                         â”‚          â”‚
â”‚  â”‚  - ç»Ÿè®¡ä¿¡æ¯                              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                      â†•                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  knowledge.Retriever (å·²å®ç°)            â”‚          â”‚
â”‚  â”‚  - FTS5 å…¨æ–‡æ£€ç´¢                         â”‚          â”‚
â”‚  â”‚  - å‘é‡æ£€ç´¢ (Cosine Similarity)          â”‚          â”‚
â”‚  â”‚  - æ··åˆæ£€ç´¢ (RRF ç®—æ³•)                   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ•°æ®å­˜å‚¨å±‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ SQLite       â”‚  FTS5 ç´¢å¼•   â”‚  Embedding   â”‚        â”‚
â”‚  â”‚ (æ–‡æ¡£æ•°æ®)   â”‚  (å…¨æ–‡æ£€ç´¢)  â”‚  (å‘é‡å­—æ®µ)  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### æ¨¡å— 1: çŸ¥è¯†åº“ç®¡ç†é¡µé¢

**åŠŸèƒ½æè¿°**ï¼š
- æ–°å¢å¯¼èˆªæ å…¥å£ï¼šKnowledgeï¼ˆä½äº MCP å’Œ History ä¹‹é—´ï¼‰
- å›¾æ ‡ï¼šBookOpen æˆ– Library
- è·¯ç”±ï¼š`#/knowledge`

**å­åŠŸèƒ½**ï¼š
1. æ–‡æ¡£åˆ—è¡¨è§†å›¾ï¼ˆé»˜è®¤è§†å›¾ï¼‰
2. åˆ†ç±»å¯¼èˆªï¼ˆå·¦ä¾§è¾¹æ ï¼‰
3. æœç´¢å’Œç­›é€‰ï¼ˆé¡¶éƒ¨å·¥å…·æ ï¼‰
4. æ–‡æ¡£ç¼–è¾‘å™¨ï¼ˆå¼¹çª—/ä¾§è¾¹æ ï¼‰
5. ç»Ÿè®¡é¢æ¿ï¼ˆé¡¶éƒ¨å¡ç‰‡ï¼‰

#### æ¨¡å— 2: æ–‡æ¡£ç®¡ç†

**æ–‡æ¡£ç»„ç»‡æ–¹å¼**ï¼š
- **åˆ†ç±»ï¼ˆCategoryï¼‰**ï¼šå•é€‰ï¼Œå¿…å¡«
  - é¢„å®šä¹‰åˆ†ç±»ï¼šè¿ç»´æ–‡æ¡£ã€API æ–‡æ¡£ã€æ•…éšœæ¡ˆä¾‹ã€é…ç½®æ¨¡æ¿
  - æ”¯æŒè‡ªå®šä¹‰æ·»åŠ 

- **æ ‡ç­¾ï¼ˆTagsï¼‰**ï¼šå¤šé€‰ï¼Œå¯é€‰
  - çµæ´»æ‰“æ ‡ç­¾ï¼š#nginx #kubernetes #ç›‘æ§ ç­‰
  - è¾“å…¥æ—¶è‡ªåŠ¨æç¤ºå·²æœ‰æ ‡ç­¾
  - æ”¯æŒåˆ›å»ºæ–°æ ‡ç­¾

**æ–‡æ¡£ç±»å‹**ï¼š
- Markdownï¼ˆPhase 1 é‡ç‚¹æ”¯æŒï¼‰
- PDFï¼ˆé¢„ç•™ï¼ŒPhase 3ï¼‰
- URLï¼ˆé¢„ç•™ï¼ŒPhase 3ï¼‰
- Manualï¼ˆæ‰‹åŠ¨è¾“å…¥ï¼‰

**æ–‡æ¡£çŠ¶æ€**ï¼š
- å¯ç”¨ï¼ˆEnabledï¼‰ï¼šAI å¯¹è¯ä¼šæ£€ç´¢
- ç¦ç”¨ï¼ˆDisabledï¼‰ï¼šä¸å‚ä¸æ£€ç´¢ï¼Œä½†ä¿ç•™æ•°æ®

#### æ¨¡å— 3: AI å¯¹è¯é›†æˆ

**ç°æœ‰æœºåˆ¶ï¼ˆè‡ªåŠ¨ç”Ÿæ•ˆï¼‰**ï¼š
```
ç”¨æˆ·æé—® â†’ StreamHandler.ChatStream
         â†’ knowledgeRet.Retrieve(query)  # è‡ªåŠ¨æ£€ç´¢
         â†’ æ„å»º System Promptï¼ˆåŒ…å«ç›¸å…³æ–‡æ¡£ï¼‰
         â†’ LLM ç”Ÿæˆå›å¤
```

**å‰ç«¯å¢å¼ºï¼ˆæ–°å¢ï¼‰**ï¼š
- Chat ç•Œé¢æ˜¾ç¤º"å¼•ç”¨æ–‡æ¡£"æ ‡è®°
- æ˜¾ç¤ºæ–‡æ¡£æ ‡é¢˜ã€ç›¸å…³æ€§è¯„åˆ†
- ç‚¹å‡»å¯æŸ¥çœ‹æ–‡æ¡£è¯¦æƒ…

---

## ä¸‰ã€æ•°æ®æ¨¡å‹è®¾è®¡

### 3.1 æ•°æ®åº“è¡¨ç»“æ„

**knowledge_documents è¡¨**ï¼ˆå·²å­˜åœ¨ï¼Œéœ€æ‰©å±•ï¼‰

```sql
CREATE TABLE knowledge_documents (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    created_at DATETIME,
    updated_at DATETIME,
    deleted_at DATETIME,

    -- åŸºç¡€ä¿¡æ¯
    title VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    doc_type VARCHAR(50) DEFAULT 'markdown',  -- markdown/pdf/url/manual

    -- åˆ†ç±»å’Œæ ‡ç­¾
    category VARCHAR(100),                     -- å•ä¸ªåˆ†ç±»
    tags TEXT,                                 -- JSON æ•°ç»„: ["tag1", "tag2"]

    -- å…ƒæ•°æ®
    metadata JSON,                             -- æ¥æº URLã€ä½œè€…ç­‰

    -- çŠ¶æ€
    enabled BOOLEAN DEFAULT TRUE,

    -- å‘é‡æ£€ç´¢
    embedding TEXT,                            -- JSON æ ¼å¼å‘é‡
    embedding_model VARCHAR(64)                -- æ¨¡å‹æ ‡è¯†
);

-- FTS5 è™šæ‹Ÿè¡¨ï¼ˆå·²å­˜åœ¨ï¼‰
CREATE VIRTUAL TABLE knowledge_fts USING fts5(
    title, content,
    content=knowledge_documents,
    content_rowid=id
);
```

**ç´¢å¼•ä¼˜åŒ–**ï¼š
```sql
CREATE INDEX idx_knowledge_category ON knowledge_documents(category);
CREATE INDEX idx_knowledge_enabled ON knowledge_documents(enabled);
CREATE INDEX idx_knowledge_created ON knowledge_documents(created_at DESC);
```

### 3.2 æ•°æ®ç»“æ„ï¼ˆTypeScriptï¼‰

**å‰ç«¯æ¥å£å®šä¹‰**ï¼š

```typescript
// æ–‡æ¡£æ¨¡å‹
interface KnowledgeDocument {
  id: number;
  title: string;
  content: string;
  doc_type: 'markdown' | 'pdf' | 'url' | 'manual';
  category: string;
  tags: string[];
  enabled: boolean;
  metadata: {
    source_url?: string;
    author?: string;
    [key: string]: any;
  };
  created_at: string;
  updated_at: string;

  // æ£€ç´¢æ—¶è¿”å›
  score?: number;  // ç›¸å…³æ€§è¯„åˆ†
}

// åˆ›å»ºæ–‡æ¡£è¯·æ±‚
interface CreateDocumentRequest {
  title: string;
  content: string;
  doc_type?: string;
  category: string;
  tags?: string[];
  metadata?: Record<string, any>;
}

// ç»Ÿè®¡ä¿¡æ¯
interface KnowledgeStats {
  total_count: number;
  enabled_count: number;
  categories: Array<{
    name: string;
    count: number;
  }>;
  tags: Array<{
    name: string;
    count: number;
  }>;
}
```

---

## å››ã€API æ¥å£è®¾è®¡

### 4.1 RESTful API åˆ—è¡¨

**åŸºç¡€è·¯å¾„**: `/api/v1/knowledge`

| æ–¹æ³•   | è·¯å¾„                      | åŠŸèƒ½             | å‚æ•°è¯´æ˜                                      |
|--------|---------------------------|------------------|-----------------------------------------------|
| GET    | `/documents`              | è·å–æ–‡æ¡£åˆ—è¡¨     | ?category=&tags=&enabled=&page=&page_size=    |
| GET    | `/documents/:id`          | è·å–å•ä¸ªæ–‡æ¡£     | è·¯å¾„å‚æ•°: id                                  |
| POST   | `/documents`              | åˆ›å»ºæ–‡æ¡£         | Body: CreateDocumentRequest                   |
| PUT    | `/documents/:id`          | æ›´æ–°æ–‡æ¡£         | Body: UpdateDocumentRequest                   |
| DELETE | `/documents/:id`          | åˆ é™¤æ–‡æ¡£         | è·¯å¾„å‚æ•°: id                                  |
| PATCH  | `/documents/:id/toggle`   | å¯ç”¨/ç¦ç”¨æ–‡æ¡£    | Body: {enabled: true/false}                   |
| GET    | `/stats`                  | è·å–ç»Ÿè®¡ä¿¡æ¯     | æ—                                             |
| GET    | `/categories`             | è·å–æ‰€æœ‰åˆ†ç±»     | è¿”å›åˆ†ç±»åˆ—è¡¨åŠæ¯ä¸ªåˆ†ç±»çš„æ–‡æ¡£æ•°                |
| GET    | `/tags`                   | è·å–æ‰€æœ‰æ ‡ç­¾     | è¿”å›æ ‡ç­¾åˆ—è¡¨åŠä½¿ç”¨æ¬¡æ•°                        |
| POST   | `/search`                 | æœç´¢æ–‡æ¡£         | Body: {query: string, category?: string}      |

### 4.2 API è¯¦ç»†è¯´æ˜

**4.2.1 è·å–æ–‡æ¡£åˆ—è¡¨**

```http
GET /api/v1/knowledge/documents?category=è¿ç»´æ–‡æ¡£&enabled=true&page=1&page_size=20
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "documents": [
      {
        "id": 1,
        "title": "Nginx é‡å¯æŒ‡å—",
        "content": "...",
        "category": "è¿ç»´æ–‡æ¡£",
        "tags": ["nginx", "linux"],
        "enabled": true,
        "created_at": "2026-01-03T10:00:00Z"
      }
    ],
    "total": 45,
    "page": 1,
    "page_size": 20
  }
}
```

**4.2.2 åˆ›å»ºæ–‡æ¡£**

```http
POST /api/v1/knowledge/documents
Content-Type: application/json

{
  "title": "Kubernetes Pod æ•…éšœæ’æŸ¥",
  "content": "# æ’æŸ¥æ­¥éª¤\n\n1. æŸ¥çœ‹ Pod çŠ¶æ€...",
  "category": "æ•…éšœæ¡ˆä¾‹",
  "tags": ["kubernetes", "troubleshooting"],
  "metadata": {
    "author": "å¼ ä¸‰"
  }
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "id": 46,
    "title": "Kubernetes Pod æ•…éšœæ’æŸ¥",
    "created_at": "2026-01-03T14:30:00Z"
  }
}
```

**4.2.3 æœç´¢æ–‡æ¡£**

```http
POST /api/v1/knowledge/search
Content-Type: application/json

{
  "query": "å¦‚ä½•é‡å¯ Nginx",
  "category": "è¿ç»´æ–‡æ¡£"
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "documents": [
      {
        "id": 1,
        "title": "Nginx é‡å¯æŒ‡å—",
        "content": "...",
        "score": 0.89,  // ç›¸å…³æ€§è¯„åˆ†
        "category": "è¿ç»´æ–‡æ¡£"
      }
    ],
    "query": "å¦‚ä½•é‡å¯ Nginx",
    "total": 3
  }
}
```

---

## äº”ã€UI/UX è®¾è®¡

### 5.1 é¡µé¢å¸ƒå±€

**ä¸»é¡µé¢ç»“æ„**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡åŒºï¼ˆ3ä¸ªå¡ç‰‡æ¨ªå‘æ’åˆ—ï¼‰                      â”‚
â”‚  ğŸ“Š æ€»æ–‡æ¡£: 45   âœ… å·²å¯ç”¨: 42   ğŸ·ï¸ åˆ†ç±»: 4           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ†ç±»å¯¼èˆª     â”‚  å·¥å…·æ : [ğŸ” æœç´¢æ¡†] [+ æ–°å»º] [ç­›é€‰â–¾]   â”‚
â”‚ (å·¦ä¾§ 250px) â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                                          â”‚
â”‚ ğŸ“š å…¨éƒ¨(45)  â”‚  æ–‡æ¡£åˆ—è¡¨è¡¨æ ¼                            â”‚
â”‚ ğŸ“– è¿ç»´(15)  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ ğŸ”§ API(12)   â”‚  â”‚ æ ‡é¢˜ | åˆ†ç±» | æ ‡ç­¾ | çŠ¶æ€ | æ“ä½œ â”‚ â”‚
â”‚ ğŸš¨ æ•…éšœ(10)  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ âš™ï¸  é…ç½®(8)   â”‚  â”‚ Nginxé‡å¯ | è¿ç»´ | [nginx][linux]â”‚â”‚ â”‚
â”‚              â”‚  â”‚ [â—å¯ç”¨] [æŸ¥çœ‹][ç¼–è¾‘][åˆ é™¤]         â”‚ â”‚
â”‚              â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚              â”‚  â”‚ K8sæ•…éšœ | æ•…éšœ | [k8s][debug]    â”‚ â”‚
â”‚              â”‚  â”‚ [â—‹ç¦ç”¨] [æŸ¥çœ‹][ç¼–è¾‘][åˆ é™¤]         â”‚ â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚  åˆ†é¡µ: [1] 2 3 ... 10                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å…³é”®ç»„ä»¶è®¾è®¡

#### 5.2.1 æ–‡æ¡£ç¼–è¾‘å™¨

**å¸ƒå±€**ï¼šå…¨å±å¼¹çª—æˆ–å¤§ä¾§è¾¹æ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¾‘æ–‡æ¡£                                      [ä¿å­˜] [å–æ¶ˆ]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ ‡é¢˜: [                                               ] â”‚
â”‚ åˆ†ç±»: [è¿ç»´æ–‡æ¡£ â–¾]     æ ‡ç­¾: [#nginx] [#linux] [+]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Markdown ç¼–è¾‘å™¨       â”‚  å®æ—¶é¢„è§ˆ                        â”‚
â”‚                      â”‚                                  â”‚
â”‚ # æ ‡é¢˜               â”‚  æ ‡é¢˜                            â”‚
â”‚ - åˆ—è¡¨é¡¹             â”‚  â€¢ åˆ—è¡¨é¡¹                        â”‚
â”‚                      â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ å…ƒæ•°æ® (å¯é€‰): æ¥æº URL [                            ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½è¦ç‚¹**ï¼š
- å·¦å³åˆ†æ ï¼šç¼–è¾‘å™¨ + å®æ—¶é¢„è§ˆ
- Markdown å·¥å…·æ ï¼šåŠ ç²—ã€æ–œä½“ã€ä»£ç ã€é“¾æ¥ç­‰
- æ ‡ç­¾è¾“å…¥ï¼šæ”¯æŒè‡ªåŠ¨è¡¥å…¨ã€å›è½¦åˆ›å»º
- å¿«æ·é”®ï¼šCtrl+S ä¿å­˜ï¼ŒEsc å…³é—­

#### 5.2.2 åˆ†ç±»å¯¼èˆª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“š çŸ¥è¯†åº“    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ å…¨éƒ¨ (45) â”‚ â† é»˜è®¤é€‰ä¸­
â”‚ ğŸ“– è¿ç»´ (15) â”‚
â”‚ ğŸ”§ API (12)  â”‚
â”‚ ğŸš¨ æ•…éšœ (10) â”‚
â”‚ âš™ï¸  é…ç½® (8)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [+ æ–°åˆ†ç±»]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äº¤äº’**ï¼š
- ç‚¹å‡»åˆ†ç±»ç­›é€‰æ–‡æ¡£åˆ—è¡¨
- æ˜¾ç¤ºæ¯ä¸ªåˆ†ç±»çš„æ–‡æ¡£æ•°é‡
- æ”¯æŒè‡ªå®šä¹‰æ·»åŠ åˆ†ç±»

#### 5.2.3 æœç´¢æ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” æœç´¢æ–‡æ¡£ï¼ˆæ ‡é¢˜ã€å†…å®¹ã€æ ‡ç­¾ï¼‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åŠŸèƒ½**ï¼š
- å®æ—¶æœç´¢ï¼ˆdebounce 500msï¼‰
- æœç´¢èŒƒå›´ï¼šæ ‡é¢˜ + å†…å®¹ + æ ‡ç­¾
- é«˜äº®æ˜¾ç¤ºæœç´¢å…³é”®è¯
- æ˜¾ç¤ºç›¸å…³æ€§è¯„åˆ†

#### 5.2.4 æ ‡ç­¾æ˜¾ç¤º

```
[#nginx] [#linux] [#systemd]
```

**æ ·å¼**ï¼š
- åœ†è§’æ ‡ç­¾ï¼Œä¸åŒé¢œè‰²åŒºåˆ†
- ç‚¹å‡»æ ‡ç­¾ç­›é€‰ç›¸å…³æ–‡æ¡£
- é¼ æ ‡æ‚¬åœæ˜¾ç¤ºä½¿ç”¨æ¬¡æ•°

### 5.3 å“åº”å¼è®¾è®¡

**æ¡Œé¢ç«¯ï¼ˆâ‰¥1024pxï¼‰**ï¼š
- å·¦å³å¸ƒå±€ï¼šåˆ†ç±»å¯¼èˆª + æ–‡æ¡£åˆ—è¡¨
- ç¼–è¾‘å™¨ï¼šå·¦å³åˆ†æ ï¼ˆç¼–è¾‘ + é¢„è§ˆï¼‰

**å¹³æ¿ç«¯ï¼ˆ768px - 1024pxï¼‰**ï¼š
- åˆ†ç±»å¯¼èˆªæ”¹ä¸ºé¡¶éƒ¨ä¸‹æ‹‰é€‰æ‹©
- ç¼–è¾‘å™¨ï¼šå·¦å³åˆ†æ 

**ç§»åŠ¨ç«¯ï¼ˆ<768pxï¼‰**ï¼š
- åˆ†ç±»å¯¼èˆªï¼šé¡¶éƒ¨ä¸‹æ‹‰
- ç¼–è¾‘å™¨ï¼šä¸Šä¸‹å¸ƒå±€ï¼ŒTab åˆ‡æ¢ï¼ˆç¼–è¾‘/é¢„è§ˆï¼‰
- è¡¨æ ¼æ”¹ä¸ºå¡ç‰‡å¸ƒå±€

### 5.4 ç©ºçŠ¶æ€è®¾è®¡

**é¦–æ¬¡ä½¿ç”¨**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ“š çŸ¥è¯†åº“æ˜¯ç©ºçš„               â”‚
â”‚                                        â”‚
â”‚  æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ªæ–‡æ¡£ï¼Œè®© AI æ›´æ™ºèƒ½ï¼    â”‚
â”‚                                        â”‚
â”‚       [+ åˆ›å»ºç¬¬ä¸€ä¸ªæ–‡æ¡£]               â”‚
â”‚                                        â”‚
â”‚  ğŸ’¡ æç¤ºï¼š                             â”‚
â”‚     â€¢ æ·»åŠ è¿ç»´æ‰‹å†Œã€API æ–‡æ¡£           â”‚
â”‚     â€¢ AI ä¼šè‡ªåŠ¨å¼•ç”¨ç›¸å…³å†…å®¹            â”‚
â”‚     â€¢ æ”¯æŒ Markdown æ ¼å¼               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœç´¢æ— ç»“æœ**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸ” æœªæ‰¾åˆ°ç›¸å…³æ–‡æ¡£                   â”‚
â”‚                                        â”‚
â”‚    è¯•è¯•å…¶ä»–å…³é”®è¯æˆ–æ·»åŠ æ–°æ–‡æ¡£          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…­ã€æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 6.1 åç«¯å®ç°ï¼ˆGoï¼‰

#### 6.1.1 æ•°æ®æ¨¡å‹æ‰©å±•

**ä¿®æ”¹æ–‡ä»¶**ï¼š`internal/model/knowledge_document.go`

```go
type KnowledgeDocument struct {
    ID             uint      `gorm:"primaryKey" json:"id"`
    CreatedAt      time.Time `json:"created_at"`
    UpdatedAt      time.Time `json:"updated_at"`
    DeletedAt      *time.Time `gorm:"index" json:"-"`

    // åŸºç¡€ä¿¡æ¯
    Title          string    `json:"title" gorm:"size:255"`
    Content        string    `json:"content" gorm:"type:text"`
    DocType        string    `json:"doc_type" gorm:"size:50"` // markdown/pdf/url/manual

    // åˆ†ç±»å’Œæ ‡ç­¾
    Category       string    `json:"category" gorm:"size:100;index"`
    Tags           string    `json:"tags" gorm:"type:text"` // JSON æ•°ç»„: ["tag1", "tag2"]

    // å…ƒæ•°æ®
    Metadata       string    `json:"metadata" gorm:"type:json"`

    // çŠ¶æ€
    Enabled        bool      `json:"enabled" gorm:"default:true;index"`

    // å‘é‡æ£€ç´¢
    Embedding      string    `json:"-" gorm:"type:text"`
    EmbeddingModel string    `json:"-" gorm:"size:64"`
}
```

#### 6.1.2 Handler å±‚

**æ–°å»ºæ–‡ä»¶**ï¼š`internal/handler/knowledge_handler.go`

```go
package handler

import (
    "net/http"
    "strconv"

    "github.com/eryajf/zenops/internal/knowledge"
    "github.com/gin-gonic/gin"
)

type KnowledgeHandler struct {
    retriever *knowledge.Retriever
}

func NewKnowledgeHandler(retriever *knowledge.Retriever) *KnowledgeHandler {
    return &KnowledgeHandler{retriever: retriever}
}

// RegisterRoutes æ³¨å†Œè·¯ç”±
func (h *KnowledgeHandler) RegisterRoutes(r *gin.RouterGroup) {
    kg := r.Group("/knowledge")
    {
        kg.GET("/documents", h.ListDocuments)
        kg.GET("/documents/:id", h.GetDocument)
        kg.POST("/documents", h.CreateDocument)
        kg.PUT("/documents/:id", h.UpdateDocument)
        kg.DELETE("/documents/:id", h.DeleteDocument)
        kg.PATCH("/documents/:id/toggle", h.ToggleDocument)

        kg.GET("/stats", h.GetStats)
        kg.GET("/categories", h.GetCategories)
        kg.GET("/tags", h.GetTags)
        kg.POST("/search", h.SearchDocuments)
    }
}

// ListDocuments è·å–æ–‡æ¡£åˆ—è¡¨
func (h *KnowledgeHandler) ListDocuments(c *gin.Context) {
    category := c.Query("category")
    enabledStr := c.Query("enabled")

    var enabled *bool
    if enabledStr != "" {
        e := enabledStr == "true"
        enabled = &e
    }

    docs, err := h.retriever.ListDocuments(category, enabled)
    if err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }

    c.JSON(http.StatusOK, gin.H{
        "code": 200,
        "data": docs,
    })
}

// CreateDocument åˆ›å»ºæ–‡æ¡£
func (h *KnowledgeHandler) CreateDocument(c *gin.Context) {
    var req knowledge.AddDocumentRequest
    if err := c.ShouldBindJSON(&req); err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
        return
    }

    docID, err := h.retriever.AddDocument(&req)
    if err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }

    c.JSON(http.StatusOK, gin.H{
        "code": 200,
        "data": gin.H{"id": docID},
    })
}

// GetDocument è·å–å•ä¸ªæ–‡æ¡£
func (h *KnowledgeHandler) GetDocument(c *gin.Context) {
    id, _ := strconv.ParseUint(c.Param("id"), 10, 32)

    doc, err := h.retriever.GetDocumentByID(uint(id))
    if err != nil {
        c.JSON(http.StatusNotFound, gin.H{"error": err.Error()})
        return
    }

    c.JSON(http.StatusOK, gin.H{
        "code": 200,
        "data": doc,
    })
}

// UpdateDocument æ›´æ–°æ–‡æ¡£
func (h *KnowledgeHandler) UpdateDocument(c *gin.Context) {
    id, _ := strconv.ParseUint(c.Param("id"), 10, 32)

    var req knowledge.AddDocumentRequest
    if err := c.ShouldBindJSON(&req); err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
        return
    }

    if err := h.retriever.UpdateDocument(uint(id), &req); err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }

    c.JSON(http.StatusOK, gin.H{"code": 200, "message": "updated"})
}

// DeleteDocument åˆ é™¤æ–‡æ¡£
func (h *KnowledgeHandler) DeleteDocument(c *gin.Context) {
    id, _ := strconv.ParseUint(c.Param("id"), 10, 32)

    if err := h.retriever.DeleteDocument(uint(id)); err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }

    c.JSON(http.StatusOK, gin.H{"code": 200, "message": "deleted"})
}

// ToggleDocument å¯ç”¨/ç¦ç”¨æ–‡æ¡£
func (h *KnowledgeHandler) ToggleDocument(c *gin.Context) {
    id, _ := strconv.ParseUint(c.Param("id"), 10, 32)

    var req struct {
        Enabled bool `json:"enabled"`
    }
    if err := c.ShouldBindJSON(&req); err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
        return
    }

    if err := h.retriever.ToggleDocument(uint(id), req.Enabled); err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }

    c.JSON(http.StatusOK, gin.H{"code": 200, "message": "toggled"})
}

// GetStats è·å–ç»Ÿè®¡ä¿¡æ¯
func (h *KnowledgeHandler) GetStats(c *gin.Context) {
    stats, err := h.retriever.GetStats()
    if err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }

    c.JSON(http.StatusOK, gin.H{
        "code": 200,
        "data": stats,
    })
}

// GetCategories è·å–æ‰€æœ‰åˆ†ç±»
func (h *KnowledgeHandler) GetCategories(c *gin.Context) {
    stats, err := h.retriever.GetStats()
    if err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }

    c.JSON(http.StatusOK, gin.H{
        "code": 200,
        "data": stats["categories"],
    })
}

// GetTags è·å–æ‰€æœ‰æ ‡ç­¾
func (h *KnowledgeHandler) GetTags(c *gin.Context) {
    // TODO: å®ç°æ ‡ç­¾ç»Ÿè®¡
    c.JSON(http.StatusOK, gin.H{
        "code": 200,
        "data": []string{},
    })
}

// SearchDocuments æœç´¢æ–‡æ¡£
func (h *KnowledgeHandler) SearchDocuments(c *gin.Context) {
    var req struct {
        Query    string `json:"query" binding:"required"`
        Category string `json:"category"`
    }

    if err := c.ShouldBindJSON(&req); err != nil {
        c.JSON(http.StatusBadRequest, gin.H{"error": err.Error()})
        return
    }

    docs, err := h.retriever.Retrieve(c.Request.Context(), req.Query)
    if err != nil {
        c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
        return
    }

    // å¦‚æœæŒ‡å®šäº†åˆ†ç±»ï¼Œè¿‡æ»¤ç»“æœ
    if req.Category != "" {
        var filtered []*knowledge.Document
        for _, doc := range docs {
            if doc.Category == req.Category {
                filtered = append(filtered, doc)
            }
        }
        docs = filtered
    }

    c.JSON(http.StatusOK, gin.H{
        "code": 200,
        "data": gin.H{
            "documents": docs,
            "query":     req.Query,
            "total":     len(docs),
        },
    })
}
```

#### 6.1.3 è·¯ç”±æ³¨å†Œ

**ä¿®æ”¹æ–‡ä»¶**ï¼š`internal/server/router.go`

```go
// åœ¨ setupRoutes å‡½æ•°ä¸­æ·»åŠ 
func setupRoutes(r *gin.Engine, /* ... */) {
    // ... ç°æœ‰ä»£ç  ...

    // çŸ¥è¯†åº“è·¯ç”±
    knowledgeHandler := handler.NewKnowledgeHandler(globalAgent.Orchestrator.knowledgeRet)
    knowledgeHandler.RegisterRoutes(apiV1)
}
```

#### 6.1.4 Service å±‚å¢å¼º

**ä¿®æ”¹æ–‡ä»¶**ï¼š`internal/knowledge/retriever.go`

æ·»åŠ æ ‡ç­¾ç›¸å…³æ–¹æ³•ï¼š

```go
// GetAllTags è·å–æ‰€æœ‰æ ‡ç­¾åŠä½¿ç”¨æ¬¡æ•°
func (r *Retriever) GetAllTags() (map[string]int, error) {
    var docs []model.KnowledgeDocument
    if err := r.db.Find(&docs).Error; err != nil {
        return nil, err
    }

    tagCount := make(map[string]int)
    for _, doc := range docs {
        if doc.Tags == "" {
            continue
        }

        var tags []string
        if err := json.Unmarshal([]byte(doc.Tags), &tags); err != nil {
            continue
        }

        for _, tag := range tags {
            tagCount[tag]++
        }
    }

    return tagCount, nil
}

// SearchByTags æŒ‰æ ‡ç­¾æœç´¢
func (r *Retriever) SearchByTags(tags []string) ([]*Document, error) {
    // å®ç°æ ‡ç­¾æœç´¢é€»è¾‘
    // ...
}
```

### 6.2 å‰ç«¯å®ç°ï¼ˆReact + TypeScriptï¼‰

#### 6.2.1 ç›®å½•ç»“æ„

```
zenops-web/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ KnowledgeView.tsx           # ä¸»å®¹å™¨ç»„ä»¶
â”‚   â””â”€â”€ knowledge/
â”‚       â”œâ”€â”€ DocumentList.tsx        # æ–‡æ¡£åˆ—è¡¨
â”‚       â”œâ”€â”€ DocumentEditor.tsx      # æ–‡æ¡£ç¼–è¾‘å™¨
â”‚       â”œâ”€â”€ CategoryTree.tsx        # åˆ†ç±»å¯¼èˆª
â”‚       â”œâ”€â”€ StatsCards.tsx          # ç»Ÿè®¡å¡ç‰‡
â”‚       â”œâ”€â”€ TagSelector.tsx         # æ ‡ç­¾é€‰æ‹©å™¨
â”‚       â””â”€â”€ SearchBar.tsx           # æœç´¢æ 
â”œâ”€â”€ services/
â”‚   â””â”€â”€ api.ts                      # API æœåŠ¡ï¼ˆæ–°å¢ knowledgeApiï¼‰
â”œâ”€â”€ types/
â”‚   â””â”€â”€ knowledge.ts                # çŸ¥è¯†åº“ç±»å‹å®šä¹‰
â””â”€â”€ App.tsx                         # æ·»åŠ è·¯ç”±å’Œå¯¼èˆª
```

#### 6.2.2 ç±»å‹å®šä¹‰

**æ–°å»ºæ–‡ä»¶**ï¼š`zenops-web/types/knowledge.ts`

```typescript
export interface KnowledgeDocument {
  id: number;
  title: string;
  content: string;
  doc_type: 'markdown' | 'pdf' | 'url' | 'manual';
  category: string;
  tags: string[];
  enabled: boolean;
  metadata: {
    source_url?: string;
    author?: string;
    [key: string]: any;
  };
  created_at: string;
  updated_at: string;
  score?: number;
}

export interface CreateDocumentRequest {
  title: string;
  content: string;
  doc_type?: string;
  category: string;
  tags?: string[];
  metadata?: Record<string, any>;
}

export interface KnowledgeStats {
  total_count: number;
  enabled_count: number;
  categories: string[];
}
```

#### 6.2.3 API Service

**ä¿®æ”¹æ–‡ä»¶**ï¼š`zenops-web/services/api.ts`

```typescript
// æ·»åŠ çŸ¥è¯†åº“ API
export const knowledgeApi = {
  async listDocuments(params?: {
    category?: string;
    enabled?: boolean;
  }): Promise<KnowledgeDocument[]> {
    const queryParams = new URLSearchParams();
    if (params?.category) queryParams.append('category', params.category);
    if (params?.enabled !== undefined) queryParams.append('enabled', String(params.enabled));

    const response = await fetch(`${API_BASE}/knowledge/documents?${queryParams}`, {
      headers: getAuthHeaders(),
    });
    const data = await response.json();
    return data.data;
  },

  async getDocument(id: number): Promise<KnowledgeDocument> {
    const response = await fetch(`${API_BASE}/knowledge/documents/${id}`, {
      headers: getAuthHeaders(),
    });
    const data = await response.json();
    return data.data;
  },

  async createDocument(doc: CreateDocumentRequest): Promise<number> {
    const response = await fetch(`${API_BASE}/knowledge/documents`, {
      method: 'POST',
      headers: getAuthHeaders(),
      body: JSON.stringify(doc),
    });
    const data = await response.json();
    return data.data.id;
  },

  async updateDocument(id: number, doc: CreateDocumentRequest): Promise<void> {
    await fetch(`${API_BASE}/knowledge/documents/${id}`, {
      method: 'PUT',
      headers: getAuthHeaders(),
      body: JSON.stringify(doc),
    });
  },

  async deleteDocument(id: number): Promise<void> {
    await fetch(`${API_BASE}/knowledge/documents/${id}`, {
      method: 'DELETE',
      headers: getAuthHeaders(),
    });
  },

  async toggleDocument(id: number, enabled: boolean): Promise<void> {
    await fetch(`${API_BASE}/knowledge/documents/${id}/toggle`, {
      method: 'PATCH',
      headers: getAuthHeaders(),
      body: JSON.stringify({ enabled }),
    });
  },

  async getStats(): Promise<KnowledgeStats> {
    const response = await fetch(`${API_BASE}/knowledge/stats`, {
      headers: getAuthHeaders(),
    });
    const data = await response.json();
    return data.data;
  },

  async search(query: string, category?: string): Promise<KnowledgeDocument[]> {
    const response = await fetch(`${API_BASE}/knowledge/search`, {
      method: 'POST',
      headers: getAuthHeaders(),
      body: JSON.stringify({ query, category }),
    });
    const data = await response.json();
    return data.data.documents;
  },
};
```

#### 6.2.4 æ ¸å¿ƒç»„ä»¶

**æ–°å»ºæ–‡ä»¶**ï¼š`zenops-web/components/KnowledgeView.tsx`

```typescript
import React, { useState, useEffect } from 'react';
import { BookOpen, Plus, Search } from 'lucide-react';
import { knowledgeApi } from '../services/api';
import { KnowledgeDocument } from '../types/knowledge';
import DocumentList from './knowledge/DocumentList';
import CategoryTree from './knowledge/CategoryTree';
import StatsCards from './knowledge/StatsCards';
import DocumentEditor from './knowledge/DocumentEditor';

const KnowledgeView = () => {
  const [documents, setDocuments] = useState<KnowledgeDocument[]>([]);
  const [selectedCategory, setSelectedCategory] = useState<string>('');
  const [isEditorOpen, setIsEditorOpen] = useState(false);
  const [editingDoc, setEditingDoc] = useState<KnowledgeDocument | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadDocuments();
  }, [selectedCategory]);

  const loadDocuments = async () => {
    setLoading(true);
    try {
      const docs = await knowledgeApi.listDocuments({
        category: selectedCategory || undefined,
        enabled: undefined,
      });
      setDocuments(docs);
    } catch (error) {
      console.error('Failed to load documents:', error);
    } finally {
      setLoading(false);
    }
  };

  const handleCreate = () => {
    setEditingDoc(null);
    setIsEditorOpen(true);
  };

  const handleEdit = (doc: KnowledgeDocument) => {
    setEditingDoc(doc);
    setIsEditorOpen(true);
  };

  const handleSave = async () => {
    setIsEditorOpen(false);
    await loadDocuments();
  };

  return (
    <div className="flex flex-col h-full">
      {/* ç»Ÿè®¡å¡ç‰‡ */}
      <StatsCards />

      <div className="flex flex-1 gap-6 mt-6">
        {/* å·¦ä¾§åˆ†ç±»å¯¼èˆª */}
        <div className="w-64">
          <CategoryTree
            selectedCategory={selectedCategory}
            onSelectCategory={setSelectedCategory}
          />
        </div>

        {/* å³ä¾§æ–‡æ¡£åˆ—è¡¨ */}
        <div className="flex-1 flex flex-col">
          {/* å·¥å…·æ  */}
          <div className="flex gap-4 mb-4">
            <div className="flex-1 relative">
              <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400" />
              <input
                type="text"
                placeholder="æœç´¢æ–‡æ¡£..."
                className="w-full pl-10 pr-4 py-2 border rounded-lg"
              />
            </div>
            <button
              onClick={handleCreate}
              className="flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"
            >
              <Plus className="w-4 h-4" />
              æ–°å»ºæ–‡æ¡£
            </button>
          </div>

          {/* æ–‡æ¡£åˆ—è¡¨ */}
          <DocumentList
            documents={documents}
            loading={loading}
            onEdit={handleEdit}
            onDelete={loadDocuments}
            onToggle={loadDocuments}
          />
        </div>
      </div>

      {/* ç¼–è¾‘å™¨å¼¹çª— */}
      {isEditorOpen && (
        <DocumentEditor
          document={editingDoc}
          onClose={() => setIsEditorOpen(false)}
          onSave={handleSave}
        />
      )}
    </div>
  );
};

export default KnowledgeView;
```

#### 6.2.5 æŠ€æœ¯æ ˆé€‰æ‹©

**Markdown ç¼–è¾‘å™¨**ï¼š
- åº“ï¼š`react-markdown-editor-lite` + `markdown-it`
- ç‰¹æ€§ï¼šåˆ†å±é¢„è§ˆã€å·¥å…·æ ã€è¯­æ³•é«˜äº®
- å®‰è£…ï¼š`npm install react-markdown-editor-lite markdown-it`

**æ ‡ç­¾è¾“å…¥**ï¼š
- æ–¹æ¡ˆ 1ï¼šæ‰‹å†™ï¼ˆæ¨èï¼Œæ›´è½»é‡ï¼‰
- æ–¹æ¡ˆ 2ï¼š`react-tag-autocomplete`

**å›¾æ ‡åº“**ï¼š
- ä½¿ç”¨ç°æœ‰çš„ `lucide-react`ï¼ˆå·²å®‰è£…ï¼‰

**çŠ¶æ€ç®¡ç†**ï¼š
- React Hooksï¼ˆuseState + useEffectï¼‰
- æ— éœ€ Reduxï¼ˆä¿æŒç®€å•ï¼‰

---

## ä¸ƒã€å®æ–½è®¡åˆ’

### 7.1 å¼€å‘é˜¶æ®µ

#### Phase 1: æ ¸å¿ƒåŠŸèƒ½ï¼ˆMVPï¼‰

**æ—¶é—´**ï¼š2-3 å¤©

**åç«¯ä»»åŠ¡**ï¼š
1. âœ… æ•°æ®æ¨¡å‹æ‰©å±•ï¼ˆTags å­—æ®µï¼‰
2. âœ… åˆ›å»º `KnowledgeHandler`
3. âœ… å®ç° 8 ä¸ª REST API æ¥å£
4. âœ… è·¯ç”±æ³¨å†Œ
5. âœ… å®Œå–„ `Retriever` çš„æ ‡ç­¾æŸ¥è¯¢æ–¹æ³•

**å‰ç«¯ä»»åŠ¡**ï¼š
1. âœ… åˆ›å»º `KnowledgeView` å’Œå­ç»„ä»¶
2. âœ… å®ç°æ–‡æ¡£åˆ—è¡¨ï¼ˆè¡¨æ ¼ + åˆ†é¡µï¼‰
3. âœ… å®ç°æ–‡æ¡£ç¼–è¾‘å™¨ï¼ˆMarkdownï¼‰
4. âœ… å®ç°åˆ†ç±»å¯¼èˆª
5. âœ… æ·»åŠ å¯¼èˆªæ å…¥å£
6. âœ… API æœåŠ¡é›†æˆ

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] ç”¨æˆ·èƒ½æ·»åŠ /ç¼–è¾‘/åˆ é™¤æ–‡æ¡£
- [x] æ”¯æŒåˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†
- [x] Markdown ç¼–è¾‘å™¨å¯ç”¨
- [x] AI å¯¹è¯è‡ªåŠ¨å¼•ç”¨çŸ¥è¯†åº“

---

#### Phase 2: ä½“éªŒä¼˜åŒ–

**æ—¶é—´**ï¼š1-2 å¤©

**å¢å¼ºåŠŸèƒ½**ï¼š
1. ç»Ÿè®¡é¢æ¿ï¼ˆå¡ç‰‡å±•ç¤ºï¼‰
2. é«˜çº§æœç´¢ï¼ˆæ”¯æŒæ ‡ç­¾ç­›é€‰ï¼‰
3. æ‰¹é‡æ“ä½œï¼ˆæ‰¹é‡å¯ç”¨/ç¦ç”¨ï¼‰
4. æ–‡æ¡£é¢„è§ˆæ¨¡å¼ï¼ˆåªè¯»ï¼‰
5. ç©ºçŠ¶æ€å¼•å¯¼é¡µé¢
6. å“åº”å¼å¸ƒå±€é€‚é…

**Chat ç•Œé¢å¢å¼º**ï¼š
1. æ˜¾ç¤º"å¼•ç”¨æ–‡æ¡£"æ ‡è®°
2. å¯ç‚¹å‡»æŸ¥çœ‹æ–‡æ¡£è¯¦æƒ…
3. æ˜¾ç¤ºç›¸å…³æ€§è¯„åˆ†

---

#### Phase 3: é«˜çº§åŠŸèƒ½ï¼ˆæœªæ¥è¿­ä»£ï¼‰

**å¾…å¼€å‘åŠŸèƒ½**ï¼š
1. URL è‡ªåŠ¨å¯¼å…¥ï¼ˆçˆ¬è™« + å†…å®¹æå–ï¼‰
2. PDF æ–‡ä»¶ä¸Šä¼ å’Œè§£æ
3. æ–‡æ¡£ç‰ˆæœ¬å†å²
4. åä½œç¼–è¾‘ï¼ˆå¤šäººå®æ—¶ç¼–è¾‘ï¼‰
5. æ–‡æ¡£å¯¼å…¥/å¯¼å‡ºï¼ˆæ‰¹é‡ï¼‰
6. çŸ¥è¯†å›¾è°±å¯è§†åŒ–
7. æ–‡æ¡£æ¨¡æ¿åŠŸèƒ½

---

### 7.2 å¼€å‘é¡ºåº

**ç¬¬ä¸€æ­¥ï¼šåç«¯åŸºç¡€**ï¼ˆ0.5 å¤©ï¼‰
1. æ‰©å±• `KnowledgeDocument` æ¨¡å‹ï¼ˆTags å­—æ®µï¼‰
2. åˆ›å»º `KnowledgeHandler`
3. å®ç°åŸºç¡€ CRUD APIï¼ˆList, Get, Create, Update, Deleteï¼‰
4. æ³¨å†Œè·¯ç”±

**ç¬¬äºŒæ­¥ï¼šå‰ç«¯æ¡†æ¶**ï¼ˆ0.5 å¤©ï¼‰
1. åˆ›å»ºç›®å½•ç»“æ„å’Œç»„ä»¶éª¨æ¶
2. æ·»åŠ å¯¼èˆªæ å…¥å£
3. å®ç° API Service
4. æ­å»ºä¸»é¡µé¢å¸ƒå±€

**ç¬¬ä¸‰æ­¥ï¼šæ ¸å¿ƒåŠŸèƒ½**ï¼ˆ1 å¤©ï¼‰
1. æ–‡æ¡£åˆ—è¡¨å±•ç¤º
2. åˆ†ç±»å¯¼èˆª
3. æ–‡æ¡£ç¼–è¾‘å™¨ï¼ˆMarkdownï¼‰
4. åˆ›å»º/ç¼–è¾‘/åˆ é™¤åŠŸèƒ½

**ç¬¬å››æ­¥ï¼šå¢å¼ºåŠŸèƒ½**ï¼ˆ0.5 å¤©ï¼‰
1. æ ‡ç­¾ç®¡ç†
2. æœç´¢åŠŸèƒ½
3. ç»Ÿè®¡é¢æ¿
4. å¯ç”¨/ç¦ç”¨åˆ‡æ¢

**ç¬¬äº”æ­¥ï¼šæµ‹è¯•å’Œä¼˜åŒ–**ï¼ˆ0.5 å¤©ï¼‰
1. åŠŸèƒ½æµ‹è¯•
2. å“åº”å¼é€‚é…
3. æ ·å¼ä¼˜åŒ–
4. æ€§èƒ½ä¼˜åŒ–

---

### 7.3 æ•°æ®åº“è¿ç§»

**è‡ªåŠ¨è¿ç§»**ï¼š

ä½¿ç”¨ GORM AutoMigrateï¼Œç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œï¼š

```go
// åœ¨ internal/db/init.go ä¸­
func AutoMigrate(db *gorm.DB) error {
    return db.AutoMigrate(
        &model.KnowledgeDocument{},
        // ... å…¶ä»–æ¨¡å‹
    )
}
```

**æ‰‹åŠ¨ SQL**ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š

```sql
-- æ·»åŠ  tags å­—æ®µï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
ALTER TABLE knowledge_documents ADD COLUMN tags TEXT;

-- åˆ›å»ºç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_knowledge_category ON knowledge_documents(category);
CREATE INDEX IF NOT EXISTS idx_knowledge_enabled ON knowledge_documents(enabled);
```

---

## å…«ã€é£é™©å’Œæ³¨æ„äº‹é¡¹

### 8.1 æŠ€æœ¯é£é™©

**é£é™© 1ï¼šå‘é‡æ£€ç´¢æ€§èƒ½**
- **é—®é¢˜**ï¼šå½“å‰æ˜¯å†…å­˜è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œæ–‡æ¡£æ•°å¤šæ—¶æ€§èƒ½ä¸‹é™
- **é˜ˆå€¼**ï¼šæ–‡æ¡£æ•° < 1000 æ€§èƒ½è¶³å¤Ÿ
- **ç¼“è§£**ï¼š
  - çŸ­æœŸï¼šé™åˆ¶æ£€ç´¢æ–‡æ¡£æ•°ï¼ˆmax_results=3ï¼‰
  - ä¸­æœŸï¼šæ·»åŠ ç¼“å­˜ï¼ˆRedisï¼‰
  - é•¿æœŸï¼šå¼•å…¥å‘é‡æ•°æ®åº“ï¼ˆMilvus/Qdrantï¼‰

**é£é™© 2ï¼šMarkdown ç¼–è¾‘å™¨å…¼å®¹æ€§**
- **é—®é¢˜**ï¼šä¸åŒæµè§ˆå™¨æ¸²æŸ“å·®å¼‚
- **ç¼“è§£**ï¼š
  - ä½¿ç”¨æˆç†Ÿçš„ Markdown åº“ï¼ˆmarkdown-itï¼‰
  - å……åˆ†æµ‹è¯•ï¼ˆChrome, Safari, Firefoxï¼‰
  - æä¾›é¢„è§ˆåŠŸèƒ½

**é£é™© 3ï¼šå¤§æ–‡æ¡£å¤„ç†**
- **é—®é¢˜**ï¼šå•ä¸ªæ–‡æ¡£è¿‡å¤§ï¼ˆå¦‚ API æ–‡æ¡£å‡ ä¸‡å­—ï¼‰
- **ç¼“è§£**ï¼š
  - å‰ç«¯ï¼šé™åˆ¶å†…å®¹é•¿åº¦ï¼ˆæç¤ºæ‹†åˆ†ï¼‰
  - åç«¯ï¼šåˆ†æ®µå­˜å‚¨ï¼ˆæœªæ¥ä¼˜åŒ–ï¼‰
  - æ£€ç´¢ï¼šåªç´¢å¼•æ‘˜è¦æˆ–å…³é”®éƒ¨åˆ†

### 8.2 äº§å“é£é™©

**é£é™© 1ï¼šæ ‡ç­¾æ··ä¹±**
- **é—®é¢˜**ï¼šç”¨æˆ·éšæ„åˆ›å»ºæ ‡ç­¾ï¼Œå¯¼è‡´æ ‡ç­¾çˆ†ç‚¸
- **ç¼“è§£**ï¼š
  - é™åˆ¶æ¯ä¸ªæ–‡æ¡£æœ€å¤š 10 ä¸ªæ ‡ç­¾
  - è¾“å…¥æ—¶æç¤ºå·²æœ‰æ ‡ç­¾ï¼ˆè‡ªåŠ¨è¡¥å…¨ï¼‰
  - æä¾›æ ‡ç­¾ç®¡ç†åŠŸèƒ½ï¼ˆåˆå¹¶/åˆ é™¤ï¼‰

**é£é™© 2ï¼šåˆ†ç±»ä¸åˆç†**
- **é—®é¢˜**ï¼šé¢„å®šä¹‰åˆ†ç±»ä¸ç¬¦åˆç”¨æˆ·ä¹ æƒ¯
- **ç¼“è§£**ï¼š
  - æ”¯æŒè‡ªå®šä¹‰åˆ†ç±»
  - æä¾›é»˜è®¤åˆ†ç±»ä½œä¸ºå‚è€ƒ
  - å…è®¸é‡å‘½ååˆ†ç±»

**é£é™© 3ï¼šçŸ¥è¯†åº“æ»¥ç”¨**
- **é—®é¢˜**ï¼šç”¨æˆ·æ·»åŠ å¤§é‡ä½è´¨é‡å†…å®¹
- **ç¼“è§£**ï¼š
  - å¼•å¯¼ç”¨æˆ·æ·»åŠ é«˜è´¨é‡æ–‡æ¡£
  - æä¾›æ–‡æ¡£è´¨é‡è¯„åˆ†ï¼ˆæœªæ¥ï¼‰
  - ç®¡ç†å‘˜å¯æ‰¹é‡æ¸…ç†

### 8.3 å®‰å…¨é£é™©

**é£é™© 1ï¼šXSS æ”»å‡»**
- **é—®é¢˜**ï¼šMarkdown å†…å®¹åŒ…å«æ¶æ„è„šæœ¬
- **ç¼“è§£**ï¼š
  - ä½¿ç”¨ `markdown-it` è‡ªå¸¦çš„ sanitize
  - ç¦æ­¢ HTML å†…è”ï¼ˆä»…å…è®¸ Markdownï¼‰
  - CSPï¼ˆContent Security Policyï¼‰

**é£é™© 2ï¼šæƒé™æ§åˆ¶**
- **é—®é¢˜**ï¼šPhase 1 æ— æƒé™æ§åˆ¶ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½èƒ½ç¼–è¾‘
- **ç¼“è§£**ï¼š
  - Phase 1ï¼šä»…å†…éƒ¨å›¢é˜Ÿä½¿ç”¨
  - Phase 2ï¼šæ·»åŠ è§’è‰²ï¼ˆç®¡ç†å‘˜/æ™®é€šç”¨æˆ·ï¼‰
  - Phase 3ï¼šæ–‡æ¡£çº§æƒé™ï¼ˆåˆ›å»ºè€…/æŸ¥çœ‹è€…ï¼‰

---

## ä¹ã€æµ‹è¯•è®¡åˆ’

### 9.1 å•å…ƒæµ‹è¯•

**åç«¯æµ‹è¯•**ï¼š

```go
// internal/handler/knowledge_handler_test.go
func TestCreateDocument(t *testing.T) {
    // æµ‹è¯•æ–‡æ¡£åˆ›å»º
}

func TestSearchDocuments(t *testing.T) {
    // æµ‹è¯•æœç´¢åŠŸèƒ½ï¼ˆFTS5 + å‘é‡ï¼‰
}
```

**å‰ç«¯æµ‹è¯•**ï¼š

```typescript
// components/knowledge/DocumentEditor.test.tsx
describe('DocumentEditor', () => {
  it('should save document', async () => {
    // æµ‹è¯•ä¿å­˜åŠŸèƒ½
  });
});
```

### 9.2 é›†æˆæµ‹è¯•

**æµ‹è¯•åœºæ™¯**ï¼š
1. åˆ›å»ºæ–‡æ¡£ â†’ æ£€ç´¢ â†’ AI å¯¹è¯å¼•ç”¨
2. ç¼–è¾‘æ–‡æ¡£ â†’ é‡æ–°ç”Ÿæˆ Embedding â†’ æ£€ç´¢éªŒè¯
3. ç¦ç”¨æ–‡æ¡£ â†’ AI å¯¹è¯ä¸å¼•ç”¨
4. åˆ é™¤æ–‡æ¡£ â†’ FTS5 ç´¢å¼•åŒæ­¥åˆ é™¤

### 9.3 ç”¨æˆ·æµ‹è¯•

**æµ‹è¯•ç”¨æˆ·**ï¼š3-5 åå†…éƒ¨ç”¨æˆ·

**æµ‹è¯•ä»»åŠ¡**ï¼š
1. æ·»åŠ  5 ä¸ªè¿ç»´æ–‡æ¡£
2. ä½¿ç”¨ AI å¯¹è¯ï¼Œè§‚å¯Ÿæ˜¯å¦å¼•ç”¨çŸ¥è¯†åº“
3. æœç´¢åŠŸèƒ½æµ‹è¯•
4. ç¼–è¾‘å’Œåˆ é™¤æ–‡æ¡£
5. åé¦ˆ UI/UX é—®é¢˜

---

## åã€æœªæ¥æ‰©å±•

### 10.1 è‡ªåŠ¨åŒ–å¯¼å…¥

**URL çˆ¬å–**ï¼š
- è¾“å…¥æ–‡æ¡£ URLï¼Œè‡ªåŠ¨æŠ“å–å†…å®¹
- æ”¯æŒ HTML â†’ Markdown è½¬æ¢
- å®šæœŸæ›´æ–°ï¼ˆCron Jobï¼‰

**PDF è§£æ**ï¼š
- æ”¯æŒ PDF ä¸Šä¼ 
- æå–æ–‡æœ¬å’Œç»“æ„
- ç”Ÿæˆ Markdown

### 10.2 åä½œåŠŸèƒ½

**ç‰ˆæœ¬å†å²**ï¼š
- è®°å½•æ¯æ¬¡ç¼–è¾‘
- æ”¯æŒç‰ˆæœ¬å¯¹æ¯”
- å›æ»šåˆ°å†å²ç‰ˆæœ¬

**å¤šäººç¼–è¾‘**ï¼š
- å®æ—¶åä½œï¼ˆWebSocketï¼‰
- å†²çªæ£€æµ‹
- é”å®šæœºåˆ¶

### 10.3 æ™ºèƒ½å¢å¼º

**çŸ¥è¯†å›¾è°±**ï¼š
- è‡ªåŠ¨æå–å®ä½“å’Œå…³ç³»
- å¯è§†åŒ–çŸ¥è¯†ç½‘ç»œ
- æ™ºèƒ½æ¨èç›¸å…³æ–‡æ¡£

**è´¨é‡è¯„åˆ†**ï¼š
- æ ¹æ®å¼•ç”¨æ¬¡æ•°è¯„åˆ†
- ç”¨æˆ·åé¦ˆï¼ˆæœ‰ç”¨/æ— ç”¨ï¼‰
- AI è‡ªåŠ¨è¯„ä¼°å†…å®¹è´¨é‡

---

## åä¸€ã€æ€»ç»“

### 11.1 è®¾è®¡äº®ç‚¹

1. **æ¸è¿›å¼å®æ–½**ï¼šMVP å¿«é€Ÿä¸Šçº¿ï¼Œåç»­è¿­ä»£ä¼˜åŒ–
2. **æ··åˆæ£€ç´¢**ï¼šFTS5 + å‘é‡æ£€ç´¢ï¼Œå…¼é¡¾é€Ÿåº¦å’Œå‡†ç¡®æ€§
3. **AI æ·±åº¦é›†æˆ**ï¼šçŸ¥è¯†åº“è‡ªåŠ¨èå…¥å¯¹è¯ä¸Šä¸‹æ–‡
4. **çµæ´»ç»„ç»‡**ï¼šåˆ†ç±» + æ ‡ç­¾ï¼Œé€‚åº”ä¸åŒåœºæ™¯
5. **å¯æ‰©å±•æ€§**ï¼šé¢„ç•™ URL å¯¼å…¥ã€PDF è§£æç­‰æ‰©å±•æ¥å£

### 11.2 äº¤ä»˜ç‰©

**Phase 1 äº¤ä»˜**ï¼š
- âœ… çŸ¥è¯†åº“ç®¡ç†ç•Œé¢ï¼ˆå®Œæ•´ CRUDï¼‰
- âœ… Markdown ç¼–è¾‘å™¨
- âœ… åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†
- âœ… AI å¯¹è¯é›†æˆ
- âœ… æœç´¢åŠŸèƒ½

**Phase 2 äº¤ä»˜**ï¼š
- âœ… ç»Ÿè®¡é¢æ¿
- âœ… é«˜çº§ç­›é€‰
- âœ… Chat å¼•ç”¨æ˜¾ç¤º
- âœ… å“åº”å¼å¸ƒå±€

### 11.3 æˆåŠŸæŒ‡æ ‡

**åŠŸèƒ½æŒ‡æ ‡**ï¼š
- ç”¨æˆ·èƒ½åœ¨ 5 åˆ†é’Ÿå†…æ·»åŠ ç¬¬ä¸€ä¸ªæ–‡æ¡£
- æœç´¢å“åº”æ—¶é—´ < 500msï¼ˆ1000 æ–‡æ¡£ä»¥å†…ï¼‰
- AI å¯¹è¯å¼•ç”¨å‡†ç¡®ç‡ > 80%

**ç”¨æˆ·æ»¡æ„åº¦**ï¼š
- ç•Œé¢æ˜“ç”¨æ€§è¯„åˆ† > 4/5
- çŸ¥è¯†åº“ä½¿ç”¨ç‡ > 60%ï¼ˆæ´»è·ƒç”¨æˆ·ï¼‰
- ç”¨æˆ·æ„¿æ„æŒç»­æ·»åŠ å†…å®¹

---

**æ–‡æ¡£ç»“æŸ**
